<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Sep 12, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>MediaShelf uuid-datepath-idmapper - uuid-datepath-idmapper: Introduction</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Edwin Shin" />
    <meta name="Date-Revision-yyyymmdd" content="20120912" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                                              <a href="./" id="bannerLeft">
                                                <img src="images/mediashelf-logo.png" alt="uuid-datepath-idmapper" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-09-12</span>
                  &nbsp;| <span id="projectVersion">Version: 0.5</span>
                      </div>
            <div class="xright">                    <a href="http://www.yourmediashelf.com/" class="externalLink" title="MediaShelf">MediaShelf</a>
            |
                        <a href="http://github.com/mediashelf/" class="externalLink" title="Projects on GitHub">Projects on GitHub</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>uuid-datepath-idmapper</h5>
                  <ul>
                  <li class="none">
            <strong>Introduction</strong>
          </li>
                  <li class="none">
                          <a href="usage.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
                          <a href="generate_uuids.html" title="Generating UUIDs">Generating UUIDs</a>
            </li>
          </ul>
                       <h5>Project Information</h5>
                  <ul>
                  <li class="none">
                          <a href="dependencies.html" title="Dependencies">Dependencies</a>
            </li>
                  <li class="none">
                          <a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
            </li>
                  <li class="none">
                          <a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="Project License">Project License</a>
            </li>
                  <li class="none">
                          <a href="project-summary.html" title="Project Summary">Project Summary</a>
            </li>
                  <li class="none">
                          <a href="team-list.html" title="Project Team">Project Team</a>
            </li>
                  <li class="none">
                          <a href="source-repository.html" title="Source Repository">Source Repository</a>
            </li>
          </ul>
                       <h5>Project Reports</h5>
                  <ul>
                  <li class="none">
                          <a href="changelog.html" title="Change Log">Change Log</a>
            </li>
                  <li class="none">
                          <a href="dev-activity.html" title="Developer Activity">Developer Activity</a>
            </li>
                  <li class="none">
                          <a href="file-activity.html" title="File Activity">File Activity</a>
            </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
                  <li class="none">
                          <a href="xref/index.html" title="Browse Source Code">Browse Source Code</a>
            </li>
                  <li class="none">
                          <a href="cobertura/index.html" title="Test Coverage">Test Coverage</a>
            </li>
                  <li class="none">
                          <a href="surefire-report.html" title="Test Results">Test Results</a>
            </li>
                  <li class="none">
                          <a href="testapidocs/index.html" title="Test JavaDocs">Test JavaDocs</a>
            </li>
                  <li class="none">
                          <a href="xref-test/index.html" title="Browse Test Source Code">Browse Test Source Code</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Introduction<a name="Introduction"></a></h2><p>The MediaShelf <a class="externalLink" href="http://www.github.com/mediashelf/uuid-datepath-idmapper">uuid-datepath-idmapper</a> is an <a class="externalLink" href="http://akubraproject.org/">Akubra</a> IdMapper implementation that uses time-coded UUIDs (i.e. UUID version 1) to calculate date-based paths.</p><p>The chief motivation for uuid-datepath-idmapper was to enable a filesystem distribution that better supported selective backup and restore as well as tiered storage decisions (e.g. where older resources might go to slower, cheaper storage, but newer resources went to faster, more expensive storage).</p><p>The default IdMapper implementation used by Fedora is the HashPathIdMapper, which calculates an MD5 checksum on the PID to determine where on the filesystem objects and datastreams should be stored.</p><p>For example, given the PID demo:123, we calculate the MD5 checksum of the URI form of the PID, &quot;info:fedora/demo:123&quot;, which is <tt>d2501d9bdf031b954072edfd39df70f1</tt>. In the default Fedora configuration, HashPathIdMapper uses just the first two characters of the checksum to build the directory path. So, if your objectStore is located in <tt>/opt/fedora/data/objectStore</tt>, Fedora would store the object at <tt>/opt/fedora/data/objectStore/d2/info%3Afedora%2Fdemo%3A123</tt>. (Various &quot;special&quot; characters such as colons and slashes are escaped).</p><p>When provided with a PID that includes a version 1 UUID, uuid-datepath-idmapper uses the timestamp information embedded in the UUID to calculate a date-time based filesystem path. For example, given the PID <tt>demo:25f814ce-f5ac-11e0-b139-2837370107a5.xyz</tt>, we extract the timestamp information from the UUID portion of the PID (<tt>25f814ce-f5ac-11e0-b139-2837370107a5</tt>) which is 2011-10-13T15:00:54Z. In the default configuration, uuid-datepath-idmapper uses the year, month and day to calculate the path, e.g.: <tt>/opt/fedora/data/objectStore/2011/10/13/info%3Afedora%2Fdemo%3A25f814ce-f5ac-11e0-b139-2837370107a5.xyz</tt>.</p><p>If provided a PID which is not a version 1 UUID, uuid-datepath-idmapper uses a fallback IdMapper such as the HashPathIdMapper.</p><p>uuid-datepath-idmapper can provide a filesystem distribution such as the one shown below, which creates a top-level directory based on the PID namespace (e.g. &quot;fedora-system&quot; or &quot;test&quot;), followed by either a hash-based or date-based path:</p><div class="source"><pre>/opt/fedora/data/objectStore/
    fedora-system/
        6f/
            info%3Afedora%2Ffedora-system%3AContentModel-3.0
        8c/
            info%3Afedora%2Ffedora-system%3AServiceDeployment-3.0
        96/
            info%3Afedora%2Ffedora-system%3AServiceDefinition-3.0
        e5/
            info%3Afedora%2Ffedora-system%3AFedoraObject-3.0
    test/
        2012/
            01/
                31/
                    info%3Afedora%2Ftest%3A5a701fd0-4c39-11e1-b86c-0800200c9a66</pre></div></div><div class="section"><h2>Usage<a name="Usage"></a></h2><p>For examples of how to use uuid-datepath-idmapper with Fedora, see the <a href="./usage.html">Usage</a> documentation.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2012
                        <a href="http://www.yourmediashelf.com/">MediaShelf</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
